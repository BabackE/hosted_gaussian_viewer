<!DOCTYPE html>
<html lang="en">
<head>
    <title>Stereo Image Viewer</title>
    <script type="module">
        // Ensure the custom element is defined before any script attempts to use it
        import('https://stereo-img.steren.fr/stereo-img.js').then(() => {
            // Wait for the custom elements definitions to be upgraded
            customElements.whenDefined('stereo-img').then(() => {
                const url = new URL(window.location.href);
                const searchParams = new URLSearchParams(url.search);
                const stereoImageSrc = 'assets/images/' + searchParams.get('stereo') + "_left_right_stereo.jpg" || 'assets/images/swift10fps_0203_left_right_stereo.jpg';

                // Select the container and use insertAdjacentHTML to create the element
                const container = document.getElementById('image-container');
                container.insertAdjacentHTML('afterbegin', `<stereo-img src="${stereoImageSrc}" style='height: 495.75px;'></stereo-img>`);
            });
        }).catch(error => console.error('Error loading the stereo-img module:', error));
    </script>
</head>
<body id="image-container">
</body>
</html>
